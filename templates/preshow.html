<!doctype html>
<html>
<head>
  <title>Video Quality Examples</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      color: white;
      font-family: sans-serif;
      overflow: hidden;
      height: 100%;
    }

    #label {
      position: absolute;
      top: 5%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 48px;
      z-index: 10;
      background: rgba(0, 0, 0, 0.6);
      padding: 20px;
      border-radius: 10px;
    }

    video {
      position: absolute;
      width: 100vw;
      height: 100vh;
      object-fit: contain;
      top: 0;
      left: 0;
      z-index: 1;
    }
  </style>
</head>
<body>
  <div id="label">Excellent Quality</div>
  <video id="video-player" autoplay muted playsinline>
    <source src="{{ url_for('static', filename='example_videos/COD_lossless_gop16.mp4') }}" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <script>
    const label = document.getElementById('label');
    const video = document.getElementById('video-player');

    // List all 8 videos: original + compressed for 4 games
    const examples = [
      { label: "Excellent Quality = 5", src: "{{ url_for('static', filename='example_videos/COD_lossless_gop16.mp4') }}" },
      { label: "Poor Quality = 1", src: "{{ url_for('static', filename='example_videos/COD_hardly_compressed_gop16.mp4') }}" },

      { label: "Excellent Quality = 5", src: "{{ url_for('static', filename='example_videos/DEVIL_lossless_gop16.mp4') }}" },
      { label: "Poor Quality = 1", src: "{{ url_for('static', filename='example_videos/DEVIL_hardly_compressed_gop16.mp4') }}" },

      { label: "Excellent Quality = 5", src: "{{ url_for('static', filename='example_videos/FORZA_lossless_gop16.mp4') }}" },
      { label: "Poor Quality = 1", src: "{{ url_for('static', filename='example_videos/FORZA_hardly_compressed_gop16.mp4') }}" },

      { label: "Excellent Quality = 5", src: "{{ url_for('static', filename='example_videos/PES_lossless_gop16.mp4') }}" },
      { label: "Poor Quality = 1", src: "{{ url_for('static', filename='example_videos/PES_hardly_compressed_gop16.mp4') }}" },
    ];

    let current = 0;

    function playNextExample() {
      if (current < examples.length) {
        const ex = examples[current];
        video.src = ex.src;
        label.textContent = ex.label;
        video.load();
        video.play().catch(err => console.error("Autoplay failed:", err));
        current++;
      } else {
        // Done showing all examples, redirect to rating
        window.location.href = "{{ url_for('rate') }}";
      }
    }

    // Go fullscreen if possible, then start playing
    function goFullscreenAndPlay() {
      if (video.requestFullscreen) {
        video.requestFullscreen().catch(err => console.warn("Fullscreen failed:", err));
      } else if (video.webkitRequestFullscreen) {
        video.webkitRequestFullscreen();
      } else if (video.msRequestFullscreen) {
        video.msRequestFullscreen();
      }
      playNextExample();
    }

    video.addEventListener('ended', () => {
      setTimeout(playNextExample, 1000); // 1 second delay between videos
    });

    window.onload = goFullscreenAndPlay;
  </script>
</body>
</html>
